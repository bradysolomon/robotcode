<script type="text/javascript" src="/static/jquery-2.2.1.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		var keys_pressed = []

		$(document).keydown(function(e){	
			console.log(e.which);		
			keys_pressed[e.which] = true;
			moveRobot(99);
		})

		$(document).keyup(function(e){
			keys_pressed[e.which] = false;
			moveRobot(99);
		})

		$(window).unload(function(e){
			moveRobot(0);
		})

		function moveRobot(speed){
			key_dict = {}

			if(keys_pressed[37] || keys_pressed[65]) key_dict["left_key"] = true;
			else key_dict["left_key"] = false;

			if(keys_pressed[38] || keys_pressed[87]) key_dict["up_key"] = true;
			else key_dict["up_key"] = false;

			if(keys_pressed[39] || keys_pressed[68]) key_dict["right_key"] = true;
			else key_dict["right_key"] = false;

			if(keys_pressed[40] || keys_pressed[83]) key_dict["down_key"] = true;
			else key_dict["down_key"] = false;

			if(keys_pressed[40] || keys_pressed[83]) key_dict[""] = true;
			else key_dict["down_key"] = false;

      var set_speed = -1;
			if(keys_pressed[89]){set_speed = 2;}
			else if(keys_pressed[85]){ set_speed = 4;}
			else if(keys_pressed[73]){ set_speed = 6;}
			else if(keys_pressed[79]){ set_speed = 8;}
			else if(keys_pressed[80]){ set_speed = 10;}
			
			$.ajax({
	                url: '/control_robot',
	                type: 'post',
	                data: {
                      "speed": speed,
                      "set_speed": set_speed,
	                    "keys_pressed": JSON.stringify(key_dict)
	                }
	            }
	        );
		}
	});
</script>

<html>
	<body>
		<p>
			Random Number = {{rand_numb}}
		</p>
	</body>

</html>
